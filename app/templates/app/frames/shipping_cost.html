{% load static mathfilters djmoney stripe_price wagtailroutablepage_tags mathfilters djmoney django_bootstrap5 setting %}
  
<turbo-frame id="shipping-costs">
    {% if final_price is None %}
      {% bootstrap_button disabled=True button_type="submit" content="We can't ship to this country" button_class='w-100 btn-primary my-2' %}
    {% else %}
      <div class='p-3 bg-light rounded-3 my-2'>
        <div class="text-muted mb-1 d-flex justify-content-between w-100">
          <span>Membership</span>
          <span>{% money_localize product.basic_price.unit_amount|div:100 product.basic_price.currency %}</span>
        </div>
        <div class="text-muted mb-1 d-flex justify-content-between w-100">
          <span>Shipping</span>
          <span>{% if shipping_zone.rate.amount == 0 %}FREE{% else %}{% money_localize shipping_zone.rate %}{% endif %}</span>
        </div>
        <div class="h5 mb-1 d-flex justify-content-between w-100">
          <span>Total</span>
          <span>{% money_localize final_price %}<small>{{ product.basic_price|stripe_billing_scheme }}</small></span>
        </div>
        {% if request.GET.gift_mode %}
        <div class="text-muted mb-0">
          For {% setting "GIFT_MONTHS" %} months
        </div>
        {% endif %}
      </div>
      {% bootstrap_button button_type="submit" content="Continue to payment" button_class='w-100 btn-primary my-2' %}
    {% endif %}
  </turbo-frame>

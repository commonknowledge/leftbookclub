{% load static mathfilters djmoney stripe_price wagtailroutablepage_tags mathfilters djmoney django_bootstrap5 setting %}
  
<turbo-frame id="shipping-costs">
    {% if final_price is None %}
      {% bootstrap_button disabled=True button_type="submit" content="We can't ship to this country" button_class='w-100 btn-primary my-2' %}
    {% else %}
      <div class='p-3 bg-light rounded-3 my-2'>
        <div class="text-muted mb-1">
          {{ product.basic_price.human_readable_price }} subscription fee
        </div>
        {% if shipping_fee is not None %}
        <div class="text-muted mb-1">
          {% money_localize shipping_fee|div:100 final_price.currency %} shipping fee
        </div>
        {% endif %}
        <div class="h5 mb-1">
          {{ final_price.human_readable_price }} <span class="text-muted fw-light">total</small>
        </div>
        {% if request.GET.gift_mode %}
        <div class="text-muted mb-0">
          For {% setting "GIFT_MONTHS" %} months
        </div>
        {% endif %}
      </div>
      {% bootstrap_button button_type="submit" content="Continue to payment" button_class='w-100 btn-primary my-2' %}
    {% endif %}
  </turbo-frame>
